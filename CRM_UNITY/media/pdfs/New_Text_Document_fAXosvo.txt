<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ contact_info.member_group_name }} Profile Information</title>
    <style>
        /* CSS Variables for Theming */
        :root {
            --color-primary: #1b5e20; /* Dark Green */
            --color-secondary: #43a047; /* Medium Green */
            --color-light-green: #81c784; /* Light Green for buttons/tabs */
            --color-background-body: #d1e2c4; /* Page background */
            --color-background-container: #f0fff0; /* Container background */
            --color-border-light: #aed581; /* Light border/separator */
            --color-text-dark: #333;
            --font-size-base: 14px;
            --font-size-small: 13px;
        }

        /* Base Layout */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* This prevents scrolling */
        }
        
        body {
            font-family: sans-serif;
            font-size: 14px; /* Reduced base font size */
            background: linear-gradient(to bottom, #d1e2c4, #d1e2c4);
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 95%;
            max-width: 98%;
            height: 90vh;
            display: flex;
            flex-direction: column;
            background-color: var(--color-background-container);
            padding: 1.5em;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        /* Header and Buttons */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--color-primary);
            text-align: center;
            flex-grow: 1;
            font-size: 22px;
            margin: 0;
        }
        
        .btn {
            padding: 8px 16px;
            background-color: var(--color-light-green);
            border: 1px solid var(--color-light-green);
            border-radius: 5px;
            text-decoration: none;
            color: white;
            font-weight: bold;
            font-size: var(--font-size-small);
            transition: background-color 0.3s ease;
            cursor: pointer;
            text-align: center;
        }

        .btn:hover {
            background-color: #66bb6a; /* Slightly darker green */
        }
        
        .header > a {
            flex-shrink: 0; /* Prevents button from shrinking */
        }
        
        .header > div {
            /* Placeholder for alignment balance when needed */
            width: 138.8px; /* Approximate width of the button for center alignment of h1 */
        }

        /* Profile Layout (Tabs and Content) */
        .profile-layout {
            display: flex;
            gap: 15px;
            flex: 1;
            min-height: 0; /* Important for flex-child scrolling */
        }
        
        /* Vertical Tabs Navigation */
        .tab-nav {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            width: 180px;
            border-right: 2px solid var(--color-border-light);
            overflow-y: auto;
        }
        
        .tab-nav li {
            padding: 10px 15px;
            cursor: pointer;
            background-color: var(--color-light-green); 
            border: 1px solid var(--color-light-green);
            border-right: none;
            color: white;
            margin-bottom: 4px;
            border-radius: 5px 0 0 5px;
            white-space: nowrap;
            text-align: right;
            transition: all 0.2s ease;
            font-size: var(--font-size-small);
        }

        .tab-nav li.active {
            background-color: var(--color-background-container);
            color: var(--color-primary);
            border-top: 2px solid var(--color-secondary);
            border-bottom: 2px solid var(--color-secondary);
            border-left: 2px solid var(--color-secondary);
            font-weight: bold;
            transform: translateX(2px);
            z-index: 1;
        }

        .tab-nav li:hover:not(.active) {
            background-color: #66bb6a; 
        }

        /* Tab Content Area */
        .tab-content {
            flex: 1;
            background-color: var(--color-background-container);
            padding: 15px;
            border: 1px solid var(--color-border-light);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--color-border-light);
            font-size: var(--font-size-small);
        }
        
        th {
            background-color: #e6ffe6;
            color: var(--color-primary);
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .empty-message {
            text-align: center;
            padding: 15px;
            color: #777;
            font-style: italic;
            font-size: var(--font-size-small);
        }
        
        /* Notes and Documents Shared Styles */
        .content-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .content-section h2 {
            font-size: 1.2em;
            color: var(--color-primary);
            margin-bottom: 10px;
            border-bottom: 2px solid var(--color-border-light);
            padding-bottom: 5px;
        }
        
        /* Note Specific Styles */
        .note-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .note-item {
            background-color: #e6ffe6;
            border: 1px solid var(--color-border-light);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
            border-bottom: 1px dashed var(--color-border-light);
            padding-bottom: 5px;
        }

        .note-author {
            font-weight: bold;
            color: var(--color-primary);
            font-size: 1em;
        }

        .note-timestamp {
            font-size: 0.8em;
            color: #666;
            font-style: italic;
        }

        .note-content {
            margin: 0;
            color: var(--color-text-dark);
            font-size: 1em;
            line-height: 1.5;
        }

        .add-note-form-section textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            min-height: 100px;
            font-size: 1em;
            resize: vertical;
        }

        .add-note-button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: var(--color-secondary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }

        .add-note-button:hover {
            background-color: #388e3c; /* Darker secondary green */
        }

        /* Document/PDF Styles */
        .pdf-upload-section {
            padding: 20px; /* Increased padding */
            border: 1px solid var(--color-border-light); /* Changed to solid border for cleaner look */
            border-radius: 8px;
            margin-bottom: 20px;
            background-color: var(--color-background-container); /* Use container color for consistency */
        }

        .pdf-upload-form {
            display: flex;
            flex-direction: column;
            gap: 15px; /* Spacing between form rows */
        }

        .form-row select {
            flex-grow: 1;
            max-width: 400px; /* Match the input size */
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            height: 35px; /* Adjust height for alignment */
        }

        .form-row label {
            flex-basis: 150px; /* Fixed width for labels */
            font-weight: bold;
            color: var(--color-text-dark);
            text-align: right;
            padding-right: 10px;
        }

        .form-row input[type="text"] {
            flex-grow: 1;
            max-width: 400px; /* Limit input size */
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }

        .form-error {
            color: red;
            font-size: var(--font-size-small);
            margin-left: 160px; /* Aligns error message under the input */
        }

/* Ensure default form <p> margins are overridden if necessary */
        .pdf-upload-form p {
            margin: 0; /* Remove default margins if django renders fields in <p> tags */
        }

/* The file input styling is harder to change, but the removal of margin-bottom helps */
        .pdf-upload-form input[type="file"] {
            margin-bottom: 0; 
        }

        .document-list-section table a {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: bold;
        }

        .document-list-section table a:hover {
            text-decoration: underline;
        }

        .pdf-upload-button {
            padding: 10px 20px;
            background-color: var(--color-secondary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
            align-self: flex-start; /* Align button to the left */
            margin-left: 160px; /* Align button with the inputs */
        }

        .pdf-upload-button:hover {
            background-color: #388e3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="{% url 'global_members_list' %}" class="btn">Return to Members</a>
            <h1>{{ contact_info.member_group_name }} Profile</h1>
            <div></div> </div>

        <div class="profile-layout">
            <ul class="tab-nav">
                <li class="active" data-tab-target="#general-info">General Info</li>
                <li data-tab-target="#cbc">CBC</li>
                <li data-tab-target="#cbc-admin">CBC Admin</li>
                <li data-tab-target="#cbc-consultancy">CBC Consultancy</li>
                <li data-tab-target="#cfa">CFA</li>
                <li data-tab-target="#cfa-admin">CFA Admin</li>
                <li data-tab-target="#cfa2">CFA 2</li>
                <li data-tab-target="#cfa3">CFA 3</li>
                <li data-tab-target="#communications">Communications</li>
                <li data-tab-target="#hr">Human Resources</li>
                <li data-tab-target="#section13a">Section 13A</li>
                <li data-tab-target="#notes">Notes</li>
                <li data-tab-target="#pdf-documents">PDF Documents</li>
            </ul>

<div class="tab-content">
    <section id="general-info" class="tab-pane active">
        
        <div id="general-info-display">
            <h2>General Information Overview 
                <button class="btn btn-sm edit-toggle-btn" data-target="general-info-edit" data-parent-tab="general-info" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">Edit</button>
            </h2>
            
            {% if contact_info %}
            <table class="data-table">
                <tbody>
                    <tr><th>Member Group Code</th><td>{{ contact_info.member_group_code }}</td></tr>
                    <tr><th>Member Group Name</th><td>{{ contact_info.member_group_name|default:"N/A" }}</td></tr>
                    <tr><th>Commencement Date</th><td>{{ contact_info.commencement_date|date:'Y-m-d'|default:"N/A" }}</td></tr>
                    <tr><th>Fund Status</th><td>{{ contact_info.fund_status|default:"N/A" }}</td></tr>
                    <tr><th>Postal Address</th><td>{{ contact_info.business_postal_address|default:"N/A" }}</td></tr>
                    <tr><th>Postal Code</th><td>{{ contact_info.business_postal_address_post_code|default:"N/A" }}</td></tr>
                    <tr><th>Physical Address</th><td>{{ contact_info.business_physical_address2|default:"N/A" }}</td></tr>
                    <tr><th>Physical Code</th><td>{{ contact_info.business_physical_address_post_code2|default:"N/A" }}</td></tr>
                </tbody>
            </table>
            {% else %}
            <p>No General Contact Information found.</p>
            {% endif %}
        </div>

        <div id="general-info-edit" style="display: none;">
            <h2>Edit General Information
                <button class="btn btn-sm edit-toggle-btn" data-target="general-info-display" data-parent-tab="general-info" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
            </h2>
            
            <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="update_global_contact">
                
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_member_group_name" style="font-weight: bold;">Member Group Name</label>
                    <input type="text" id="id_member_group_name" name="member_group_name" class="form-control" 
                           value="{{ contact_info.member_group_name|default:'' }}" required style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>
                
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_commencement_date" style="font-weight: bold;">Commencement Date</label>
                    <input type="date" id="id_commencement_date" name="commencement_date" class="form-control" 
                           value="{{ contact_info.commencement_date|date:'Y-m-d'|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>

                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_fund_status" style="font-weight: bold;">Fund Status</label>
                    <input type="text" id="id_fund_status" name="fund_status" class="form-control" 
                           value="{{ contact_info.fund_status|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>
                
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_business_postal_address" style="font-weight: bold;">Postal Address</label>
                    <input type="text" id="id_business_postal_address" name="business_postal_address" class="form-control" 
                           value="{{ contact_info.business_postal_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_business_postal_address_post_code" style="font-weight: bold;">Postal Code</label>
                    <input type="text" id="id_business_postal_address_post_code" name="business_postal_address_post_code" class="form-control" 
                           value="{{ contact_info.business_postal_address_post_code|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_business_physical_address2" style="font-weight: bold;">Physical Address</label>
                    <input type="text" id="id_business_physical_address2" name="business_physical_address2" class="form-control" 
                           value="{{ contact_info.business_physical_address2|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="id_business_physical_address_post_code2" style="font-weight: bold;">Physical Code</label>
                    <input type="text" id="id_business_physical_address_post_code2" name="business_physical_address_post_code2" class="form-control" 
                           value="{{ contact_info.business_physical_address_post_code2|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
                </div>
                
                <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer;">Save General Info</button>
            </form>
        </div>
    </section>

                <section id="cbc" class="tab-pane">
    
    <div id="cbc-display">
        <h2>CBC Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cbc-edit" data-parent-tab="cbc" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cbc_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cbc_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cbc_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cbc_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cbc_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cbc_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cbc_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Indemnity</th><td>{{ cbc_info.indemnity|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cbc_info.work_dial_code|default:"" }} {{ cbc_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cbc_info.fax_dial_code|default:"" }} {{ cbc_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cbc_info.mobile_number|default:"N/A" }}</td></tr>
                <tr><th>Postal Address</th><td>{{ cbc_info.business_postal_address|default:"N/A" }}</td></tr>
                <tr><th>Postal Code</th><td>{{ cbc_info.post_code|default:"N/A" }}</td></tr>
                <tr><th>Physical Address</th><td>{{ cbc_info.business_physical_address|default:"N/A" }}</td></tr>
                <tr><th>Physical Code</th><td>{{ cbc_info.post_code2|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CBC information available for this member. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cbc-edit" style="display: none;">
        <h2>{% if cbc_info %}Edit{% else %}Add{% endif %} CBC Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cbc-display" data-parent-tab="cbc" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cbc">
            
            {% comment %} Simple fields {% endcomment %}
            <div class="form-group"><label for="id_title">Title</label><input type="text" id="id_title" name="title" class="form-control" value="{{ cbc_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_first_name">First Name</label><input type="text" id="id_first_name" name="first_name" class="form-control" value="{{ cbc_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_surname">Surname</label><input type="text" id="id_surname" name="surname" class="form-control" value="{{ cbc_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_id_number">ID Number</label><input type="text" id="id_id_number" name="id_number" class="form-control" value="{{ cbc_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_email_address">E-mail</label><input type="email" id="id_email_address" name="email_address" class="form-control" value="{{ cbc_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_indemnity">Indemnity</label><input type="text" id="id_indemnity" name="indemnity" class="form-control" value="{{ cbc_info.indemnity|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            {% comment %} Phone numbers (simplified) {% endcomment %}
            <div class="form-group">
                <label for="id_work_contact_number">Work Number</label>
                <input type="text" id="id_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cbc_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cbc_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_fax_number">Fax Number</label>
                <input type="text" id="id_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cbc_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_fax_number" name="fax_number" placeholder="Number" value="{{ cbc_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_mobile_number">Mobile Number</label><input type="text" id="id_mobile_number" name="mobile_number" class="form-control" value="{{ cbc_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>

            {% comment %} Address fields {% endcomment %}
            <div class="form-group"><label for="id_business_postal_address">Postal Address</label><input type="text" id="id_business_postal_address" name="business_postal_address" class="form-control" value="{{ cbc_info.business_postal_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_post_code">Postal Code</label><input type="text" id="id_post_code" name="post_code" class="form-control" value="{{ cbc_info.post_code|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_business_physical_address">Physical Address</label><input type="text" id="id_business_physical_address" name="business_physical_address" class="form-control" value="{{ cbc_info.business_physical_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_post_code2">Physical Code</label><input type="text" id="id_post_code2" name="post_code2" class="form-control" value="{{ cbc_info.post_code2|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CBC Info</button>
        </form>
    </div>
</section>
                
                <section id="cbc-admin" class="tab-pane">
    
    <div id="cbc-admin-display">
        <h2>CBC Admin Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cbc-admin-edit" data-parent-tab="cbc-admin" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cbc_admin_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cbc_admin_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cbc_admin_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cbc_admin_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cbc_admin_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cbc_admin_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cbc_admin_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cbc_admin_info.work_dial_code|default:"" }} {{ cbc_admin_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cbc_admin_info.fax_dial_code|default:"" }} {{ cbc_admin_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cbc_admin_info.mobile_number|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CBC Admin Person information available. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cbc-admin-edit" style="display: none;">
        <h2>{% if cbc_admin_info %}Edit{% else %}Add{% endif %} CBC Admin Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cbc-admin-display" data-parent-tab="cbc-admin" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cbc_admin">
            
            {% comment %} Simple fields {% endcomment %}
            <div class="form-group"><label for="id_admin_title">Title</label><input type="text" id="id_admin_title" name="title" class="form-control" value="{{ cbc_admin_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_admin_first_name">First Name</label><input type="text" id="id_admin_first_name" name="first_name" class="form-control" value="{{ cbc_admin_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_admin_surname">Surname</label><input type="text" id="id_admin_surname" name="surname" class="form-control" value="{{ cbc_admin_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_admin_id_number">ID Number</label><input type="text" id="id_admin_id_number" name="id_number" class="form-control" value="{{ cbc_admin_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_admin_email_address">E-mail</label><input type="email" id="id_admin_email_address" name="email_address" class="form-control" value="{{ cbc_admin_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            {% comment %} Phone numbers (simplified) {% endcomment %}
            <div class="form-group">
                <label for="id_admin_work_contact_number">Work Number</label>
                <input type="text" id="id_admin_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cbc_admin_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_admin_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cbc_admin_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_admin_fax_number">Fax Number</label>
                <input type="text" id="id_admin_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cbc_admin_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_admin_fax_number" name="fax_number" placeholder="Number" value="{{ cbc_admin_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_admin_mobile_number">Mobile Number</label><input type="text" id="id_admin_mobile_number" name="mobile_number" class="form-control" value="{{ cbc_admin_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CBC Admin Info</button>
        </form>
    </div>
</section>
                
                <section id="cbc-consultancy" class="tab-pane">
    
    <div id="cbc-consultancy-display">
        <h2>CBC Consultancy Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cbc-consultancy-edit" data-parent-tab="cbc-consultancy" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cbc_consultancy_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cbc_consultancy_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cbc_consultancy_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cbc_consultancy_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cbc_consultancy_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cbc_consultancy_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cbc_consultancy_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cbc_consultancy_info.work_dial_code|default:"" }} {{ cbc_consultancy_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cbc_consultancy_info.fax_dial_code|default:"" }} {{ cbc_consultancy_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cbc_consultancy_info.mobile_number|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CBC Consultancy Person information available. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cbc-consultancy-edit" style="display: none;">
        <h2>{% if cbc_consultancy_info %}Edit{% else %}Add{% endif %} CBC Consultancy Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cbc-consultancy-display" data-parent-tab="cbc-consultancy" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cbc_consultancy">
            
            {% comment %} Simple fields {% endcomment %}
            <div class="form-group"><label for="id_consult_title">Title</label><input type="text" id="id_consult_title" name="title" class="form-control" value="{{ cbc_consultancy_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_consult_first_name">First Name</label><input type="text" id="id_consult_first_name" name="first_name" class="form-control" value="{{ cbc_consultancy_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_consult_surname">Surname</label><input type="text" id="id_consult_surname" name="surname" class="form-control" value="{{ cbc_consultancy_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_consult_id_number">ID Number</label><input type="text" id="id_consult_id_number" name="id_number" class="form-control" value="{{ cbc_consultancy_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_consult_email_address">E-mail</label><input type="email" id="id_consult_email_address" name="email_address" class="form-control" value="{{ cbc_consultancy_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            {% comment %} Phone numbers (simplified) {% endcomment %}
            <div class="form-group">
                <label for="id_consult_work_contact_number">Work Number</label>
                <input type="text" id="id_consult_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cbc_consultancy_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_consult_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cbc_consultancy_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_consult_fax_number">Fax Number</label>
                <input type="text" id="id_consult_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cbc_consultancy_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_consult_fax_number" name="fax_number" placeholder="Number" value="{{ cbc_consultancy_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_consult_mobile_number">Mobile Number</label><input type="text" id="id_consult_mobile_number" name="mobile_number" class="form-control" value="{{ cbc_consultancy_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CBC Consultancy Info</button>
        </form>
    </div>
</section>

                <section id="cfa" class="tab-pane">
    
    <div id="cfa-display">
        <h2>CFA Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa-edit" data-parent-tab="cfa" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cfa_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cfa_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cfa_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cfa_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cfa_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cfa_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cfa_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cfa_info.work_dial_code|default:"" }} {{ cfa_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cfa_info.fax_dial_code|default:"" }} {{ cfa_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cfa_info.mobile_number|default:"N/A" }}</td></tr>
                <tr><th>Postal Address</th><td>{{ cfa_info.business_postal_address|default:"N/A" }}</td></tr>
                <tr><th>Postal Code</th><td>{{ cfa_info.post_code|default:"N/A" }}</td></tr>
                <tr><th>Physical Address</th><td>{{ cfa_info.business_physical_address|default:"N/A" }}</td></tr>
                <tr><th>Physical Code</th><td>{{ cfa_info.post_code2|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CFA information available for this member. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cfa-edit" style="display: none;">
        <h2>{% if cfa_info %}Edit{% else %}Add{% endif %} CFA Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa-display" data-parent-tab="cfa" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cfa">
            
            {% comment %} Simple fields {% endcomment %}
            <div class="form-group"><label for="id_cfa_title">Title</label><input type="text" id="id_cfa_title" name="title" class="form-control" value="{{ cfa_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_first_name">First Name</label><input type="text" id="id_cfa_first_name" name="first_name" class="form-control" value="{{ cfa_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_surname">Surname</label><input type="text" id="id_cfa_surname" name="surname" class="form-control" value="{{ cfa_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_id_number">ID Number</label><input type="text" id="id_cfa_id_number" name="id_number" class="form-control" value="{{ cfa_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_email_address">E-mail</label><input type="email" id="id_cfa_email_address" name="email_address" class="form-control" value="{{ cfa_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            {% comment %} Phone numbers (simplified) {% endcomment %}
            <div class="form-group">
                <label for="id_cfa_work_contact_number">Work Number</label>
                <input type="text" id="id_cfa_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cfa_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cfa_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_cfa_fax_number">Fax Number</label>
                <input type="text" id="id_cfa_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cfa_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa_fax_number" name="fax_number" placeholder="Number" value="{{ cfa_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_cfa_mobile_number">Mobile Number</label><input type="text" id="id_cfa_mobile_number" name="mobile_number" class="form-control" value="{{ cfa_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>

            {% comment %} Address fields {% endcomment %}
            <div class="form-group"><label for="id_cfa_business_postal_address">Postal Address</label><input type="text" id="id_cfa_business_postal_address" name="business_postal_address" class="form-control" value="{{ cfa_info.business_postal_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_post_code">Postal Code</label><input type="text" id="id_cfa_post_code" name="post_code" class="form-control" value="{{ cfa_info.post_code|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_business_physical_address">Physical Address</label><input type="text" id="id_cfa_business_physical_address" name="business_physical_address" class="form-control" value="{{ cfa_info.business_physical_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_post_code2">Physical Code</label><input type="text" id="id_cfa_post_code2" name="post_code2" class="form-control" value="{{ cfa_info.post_code2|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CFA Info</button>
        </form>
    </div>
</section>

                <section id="cfa-admin" class="tab-pane">
    
    <div id="cfa-admin-display">
        <h2>CFA Admin Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa-admin-edit" data-parent-tab="cfa-admin" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cfa_admin_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cfa_admin_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cfa_admin_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cfa_admin_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cfa_admin_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cfa_admin_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cfa_admin_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cfa_admin_info.work_dial_code|default:"" }} {{ cfa_admin_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cfa_admin_info.fax_dial_code|default:"" }} {{ cfa_admin_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cfa_admin_info.mobile_number|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CFA Admin Person information available. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cfa-admin-edit" style="display: none;">
        <h2>{% if cfa_admin_info %}Edit{% else %}Add{% endif %} CFA Admin Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa-admin-display" data-parent-tab="cfa-admin" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cfa_admin">
            
            <div class="form-group"><label for="id_cfa_admin_title">Title</label><input type="text" id="id_cfa_admin_title" name="title" class="form-control" value="{{ cfa_admin_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_admin_first_name">First Name</label><input type="text" id="id_cfa_admin_first_name" name="first_name" class="form-control" value="{{ cfa_admin_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_admin_surname">Surname</label><input type="text" id="id_cfa_admin_surname" name="surname" class="form-control" value="{{ cfa_admin_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_admin_id_number">ID Number</label><input type="text" id="id_cfa_admin_id_number" name="id_number" class="form-control" value="{{ cfa_admin_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa_admin_email_address">E-mail</label><input type="email" id="id_cfa_admin_email_address" name="email_address" class="form-control" value="{{ cfa_admin_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <div class="form-group">
                <label for="id_cfa_admin_work_contact_number">Work Number</label>
                <input type="text" id="id_cfa_admin_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cfa_admin_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa_admin_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cfa_admin_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_cfa_admin_fax_number">Fax Number</label>
                <input type="text" id="id_cfa_admin_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cfa_admin_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa_admin_fax_number" name="fax_number" placeholder="Number" value="{{ cfa_admin_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_cfa_admin_mobile_number">Mobile Number</label><input type="text" id="id_cfa_admin_mobile_number" name="mobile_number" class="form-control" value="{{ cfa_admin_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CFA Admin Info</button>
        </form>
    </div>
</section>

                <section id="cfa2" class="tab-pane">
    
    <div id="cfa2-display">
        <h2>CFA 2 Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa2-edit" data-parent-tab="cfa2" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cfa2_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cfa2_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cfa2_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cfa2_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cfa2_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cfa2_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cfa2_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cfa2_info.work_dial_code|default:"" }} {{ cfa2_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cfa2_info.fax_dial_code|default:"" }} {{ cfa2_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cfa2_info.mobile_number|default:"N/A" }}</td></tr>
                <tr><th>Postal Address</th><td>{{ cfa2_info.business_postal_address|default:"N/A" }}</td></tr>
                <tr><th>Postal Code</th><td>{{ cfa2_info.post_code|default:"N/A" }}</td></tr>
                <tr><th>Physical Address</th><td>{{ cfa2_info.business_physical_address|default:"N/A" }}</td></tr>
                <tr><th>Physical Code</th><td>{{ cfa2_info.post_code2|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CFA 2 information available for this member. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cfa2-edit" style="display: none;">
        <h2>{% if cfa2_info %}Edit{% else %}Add{% endif %} CFA 2 Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa2-display" data-parent-tab="cfa2" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cfa2">
            
            <div class="form-group"><label for="id_cfa2_title">Title</label><input type="text" id="id_cfa2_title" name="title" class="form-control" value="{{ cfa2_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_first_name">First Name</label><input type="text" id="id_cfa2_first_name" name="first_name" class="form-control" value="{{ cfa2_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_surname">Surname</label><input type="text" id="id_cfa2_surname" name="surname" class="form-control" value="{{ cfa2_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_id_number">ID Number</label><input type="text" id="id_cfa2_id_number" name="id_number" class="form-control" value="{{ cfa2_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_email_address">E-mail</label><input type="email" id="id_cfa2_email_address" name="email_address" class="form-control" value="{{ cfa2_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <div class="form-group">
                <label for="id_cfa2_work_contact_number">Work Number</label>
                <input type="text" id="id_cfa2_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cfa2_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa2_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cfa2_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_cfa2_fax_number">Fax Number</label>
                <input type="text" id="id_cfa2_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cfa2_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa2_fax_number" name="fax_number" placeholder="Number" value="{{ cfa2_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_cfa2_mobile_number">Mobile Number</label><input type="text" id="id_cfa2_mobile_number" name="mobile_number" class="form-control" value="{{ cfa2_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>

            <div class="form-group"><label for="id_cfa2_business_postal_address">Postal Address</label><input type="text" id="id_cfa2_business_postal_address" name="business_postal_address" class="form-control" value="{{ cfa2_info.business_postal_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_post_code">Postal Code</label><input type="text" id="id_cfa2_post_code" name="post_code" class="form-control" value="{{ cfa2_info.post_code|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_business_physical_address">Physical Address</label><input type="text" id="id_cfa2_business_physical_address" name="business_physical_address" class="form-control" value="{{ cfa2_info.business_physical_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa2_post_code2">Physical Code</label><input type="text" id="id_cfa2_post_code2" name="post_code2" class="form-control" value="{{ cfa2_info.post_code2|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CFA 2 Info</button>
        </form>
    </div>
</section>

                <section id="cfa3" class="tab-pane">
    
    <div id="cfa3-display">
        <h2>CFA 3 Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa3-edit" data-parent-tab="cfa3" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if cfa3_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if cfa3_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ cfa3_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ cfa3_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ cfa3_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ cfa3_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ cfa3_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ cfa3_info.work_dial_code|default:"" }} {{ cfa3_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ cfa3_info.fax_dial_code|default:"" }} {{ cfa3_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ cfa3_info.mobile_number|default:"N/A" }}</td></tr>
                <tr><th>Postal Address</th><td>{{ cfa3_info.business_postal_address|default:"N/A" }}</td></tr>
                <tr><th>Postal Code</th><td>{{ cfa3_info.post_code|default:"N/A" }}</td></tr>
                <tr><th>Physical Address</th><td>{{ cfa3_info.business_physical_address|default:"N/A" }}</td></tr>
                <tr><th>Physical Code</th><td>{{ cfa3_info.post_code2|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No CFA 3 information available for this member. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="cfa3-edit" style="display: none;">
        <h2>{% if cfa3_info %}Edit{% else %}Add{% endif %} CFA 3 Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="cfa3-display" data-parent-tab="cfa3" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_cfa3">
            
            <div class="form-group"><label for="id_cfa3_title">Title</label><input type="text" id="id_cfa3_title" name="title" class="form-control" value="{{ cfa3_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_first_name">First Name</label><input type="text" id="id_cfa3_first_name" name="first_name" class="form-control" value="{{ cfa3_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_surname">Surname</label><input type="text" id="id_cfa3_surname" name="surname" class="form-control" value="{{ cfa3_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_id_number">ID Number</label><input type="text" id="id_cfa3_id_number" name="id_number" class="form-control" value="{{ cfa3_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_email_address">E-mail</label><input type="email" id="id_cfa3_email_address" name="email_address" class="form-control" value="{{ cfa3_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <div class="form-group">
                <label for="id_cfa3_work_contact_number">Work Number</label>
                <input type="text" id="id_cfa3_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ cfa3_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa3_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ cfa3_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_cfa3_fax_number">Fax Number</label>
                <input type="text" id="id_cfa3_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ cfa3_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_cfa3_fax_number" name="fax_number" placeholder="Number" value="{{ cfa3_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_cfa3_mobile_number">Mobile Number</label><input type="text" id="id_cfa3_mobile_number" name="mobile_number" class="form-control" value="{{ cfa3_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>

            <div class="form-group"><label for="id_cfa3_business_postal_address">Postal Address</label><input type="text" id="id_cfa3_business_postal_address" name="business_postal_address" class="form-control" value="{{ cfa3_info.business_postal_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_post_code">Postal Code</label><input type="text" id="id_cfa3_post_code" name="post_code" class="form-control" value="{{ cfa3_info.post_code|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_business_physical_address">Physical Address</label><input type="text" id="id_cfa3_business_physical_address" name="business_physical_address" class="form-control" value="{{ cfa3_info.business_physical_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_cfa3_post_code2">Physical Code</label><input type="text" id="id_cfa3_post_code2" name="post_code2" class="form-control" value="{{ cfa3_info.post_code2|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save CFA 3 Info</button>
        </form>
    </div>
</section>
                
                <section id="communications" class="tab-pane">
    
    <div id="communications-display">
        <h2>Communications Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="communications-edit" data-parent-tab="communications" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if communications_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if communications_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ communications_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ communications_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ communications_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ communications_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ communications_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ communications_info.work_dial_code|default:"" }} {{ communications_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ communications_info.fax_dial_code|default:"" }} {{ communications_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ communications_info.mobile_number|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No Communications Person information available. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="communications-edit" style="display: none;">
        <h2>{% if communications_info %}Edit{% else %}Add{% endif %} Communications Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="communications-display" data-parent-tab="communications" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_communications">
            
            <div class="form-group"><label for="id_communications_title">Title</label><input type="text" id="id_communications_title" name="title" class="form-control" value="{{ communications_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_communications_first_name">First Name</label><input type="text" id="id_communications_first_name" name="first_name" class="form-control" value="{{ communications_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_communications_surname">Surname</label><input type="text" id="id_communications_surname" name="surname" class="form-control" value="{{ communications_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_communications_id_number">ID Number</label><input type="text" id="id_communications_id_number" name="id_number" class="form-control" value="{{ communications_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_communications_email_address">E-mail</label><input type="email" id="id_communications_email_address" name="email_address" class="form-control" value="{{ communications_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <div class="form-group">
                <label for="id_communications_work_contact_number">Work Number</label>
                <input type="text" id="id_communications_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ communications_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_communications_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ communications_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_communications_fax_number">Fax Number</label>
                <input type="text" id="id_communications_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ communications_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_communications_fax_number" name="fax_number" placeholder="Number" value="{{ communications_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_communications_mobile_number">Mobile Number</label><input type="text" id="id_communications_mobile_number" name="mobile_number" class="form-control" value="{{ communications_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save Communications Info</button>
        </form>
    </div>
</section>

                <section id="hr" class="tab-pane">
    
    <div id="hr-display">
        <h2>Human Resources Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="hr-edit" data-parent-tab="hr" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if hr_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if hr_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ hr_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ hr_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ hr_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ hr_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ hr_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Indemnity</th><td>{{ hr_info.indemnity|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ hr_info.work_dial_code|default:"" }} {{ hr_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ hr_info.fax_dial_code|default:"" }} {{ hr_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ hr_info.mobile_number|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No Human Resources information available. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="hr-edit" style="display: none;">
        <h2>{% if hr_info %}Edit{% else %}Add{% endif %} Human Resources Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="hr-display" data-parent-tab="hr" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_hr">
            
            <div class="form-group"><label for="id_hr_title">Title</label><input type="text" id="id_hr_title" name="title" class="form-control" value="{{ hr_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_hr_first_name">First Name</label><input type="text" id="id_hr_first_name" name="first_name" class="form-control" value="{{ hr_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_hr_surname">Surname</label><input type="text" id="id_hr_surname" name="surname" class="form-control" value="{{ hr_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_hr_id_number">ID Number</label><input type="text" id="id_hr_id_number" name="id_number" class="form-control" value="{{ hr_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_hr_email_address">E-mail</label><input type="email" id="id_hr_email_address" name="email_address" class="form-control" value="{{ hr_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_hr_indemnity">Indemnity</label><input type="text" id="id_hr_indemnity" name="indemnity" class="form-control" value="{{ hr_info.indemnity|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <div class="form-group">
                <label for="id_hr_work_contact_number">Work Number</label>
                <input type="text" id="id_hr_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ hr_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_hr_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ hr_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_hr_fax_number">Fax Number</label>
                <input type="text" id="id_hr_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ hr_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_hr_fax_number" name="fax_number" placeholder="Number" value="{{ hr_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_hr_mobile_number">Mobile Number</label><input type="text" id="id_hr_mobile_number" name="mobile_number" class="form-control" value="{{ hr_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save HR Info</button>
        </form>
    </div>
</section>

                <section id="section13a" class="tab-pane">
    
    <div id="section13a-display">
        <h2>Section 13A Contact Details
            <button class="btn btn-sm edit-toggle-btn" data-target="section13a-edit" data-parent-tab="section13a" style="margin-left: 10px; padding: 5px 10px; background-color: var(--color-light-green); border: 1px solid var(--color-primary); color: var(--color-text-dark);">
                {% if section13a_info %}Edit{% else %}Add New{% endif %}
            </button>
        </h2>

        {% if section13a_info %}
        <table class="data-table">
            <tbody>
                <tr><th>Title</th><td>{{ section13a_info.title|default:"N/A" }}</td></tr>
                <tr><th>First Name</th><td>{{ section13a_info.first_name|default:"N/A" }}</td></tr>
                <tr><th>Surname</th><td>{{ section13a_info.surname|default:"N/A" }}</td></tr>
                <tr><th>ID Number</th><td>{{ section13a_info.id_number|default:"N/A" }}</td></tr>
                <tr><th>E-mail</th><td>{{ section13a_info.email_address|default:"N/A" }}</td></tr>
                <tr><th>Indemnity</th><td>{{ section13a_info.indemnity|default:"N/A" }}</td></tr>
                <tr><th>Work Number</th><td>{{ section13a_info.work_dial_code|default:"" }} {{ section13a_info.work_contact_number|default:"N/A" }}</td></tr>
                <tr><th>Fax Number</th><td>{{ section13a_info.fax_dial_code|default:"" }} {{ section13a_info.fax_number|default:"N/A" }}</td></tr>
                <tr><th>Mobile Number</th><td>{{ section13a_info.mobile_number|default:"N/A" }}</td></tr>
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">No Section 13A information available. Click 'Add New' to create a record.</p>
        {% endif %}
    </div>

    <div id="section13a-edit" style="display: none;">
        <h2>{% if section13a_info %}Edit{% else %}Add{% endif %} Section 13A Contact
            <button class="btn btn-sm edit-toggle-btn" data-target="section13a-display" data-parent-tab="section13a" style="margin-left: 10px; padding: 5px 10px; background-color: #f44336; color: white; border: 1px solid #d32f2f;">Cancel</button>
        </h2>
        
        <form method="POST" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_section13a">
            
            <div class="form-group"><label for="id_section13a_title">Title</label><input type="text" id="id_section13a_title" name="title" class="form-control" value="{{ section13a_info.title|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_section13a_first_name">First Name</label><input type="text" id="id_section13a_first_name" name="first_name" class="form-control" value="{{ section13a_info.first_name|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_section13a_surname">Surname</label><input type="text" id="id_section13a_surname" name="surname" class="form-control" value="{{ section13a_info.surname|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_section13a_id_number">ID Number</label><input type="text" id="id_section13a_id_number" name="id_number" class="form-control" value="{{ section13a_info.id_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_section13a_email_address">E-mail</label><input type="email" id="id_section13a_email_address" name="email_address" class="form-control" value="{{ section13a_info.email_address|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            <div class="form-group"><label for="id_section13a_indemnity">Indemnity</label><input type="text" id="id_section13a_indemnity" name="indemnity" class="form-control" value="{{ section13a_info.indemnity|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <div class="form-group">
                <label for="id_section13a_work_contact_number">Work Number</label>
                <input type="text" id="id_section13a_work_dial_code" name="work_dial_code" placeholder="Dial Code" value="{{ section13a_info.work_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_section13a_work_contact_number" name="work_contact_number" placeholder="Number" value="{{ section13a_info.work_contact_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group">
                <label for="id_section13a_fax_number">Fax Number</label>
                <input type="text" id="id_section13a_fax_dial_code" name="fax_dial_code" placeholder="Dial Code" value="{{ section13a_info.fax_dial_code|default:'' }}" style="width: 30%; padding: 8px; border: 1px solid #ccc; margin-right: 5px;">
                <input type="text" id="id_section13a_fax_number" name="fax_number" placeholder="Number" value="{{ section13a_info.fax_number|default:'' }}" style="width: 65%; padding: 8px; border: 1px solid #ccc;">
            </div>
            
            <div class="form-group"><label for="id_section13a_mobile_number">Mobile Number</label><input type="text" id="id_section13a_mobile_number" name="mobile_number" class="form-control" value="{{ section13a_info.mobile_number|default:'' }}" style="width: 100%; padding: 8px; border: 1px solid #ccc;"></div>
            
            <button type="submit" class="btn btn-primary" style="background-color: var(--color-primary); color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 15px;">Save Section 13A Info</button>
        </form>
    </div>
</section>

                <section id="notes" class="tab-pane">
                    <div class="content-section">
                        <div class="add-note-form-section">
                            <h2>Add New Note</h2>
                            <form method="post" action="{% url 'member_information' member_group_code=contact_info.member_group_code %}">
                                {% csrf_token %}
                                <input type="hidden" name="add_note" value="1">
                                <textarea name="note_content" placeholder="Type your note here..." required></textarea>
                                <button type="submit" class="add-note-button">Add Note</button>
                            </form>
                        </div>
                        
                        <div class="existing-notes-list">
                            <h2>Existing Notes</h2>
                            {% if notes %}
                            <div class="note-list">
                                {% for note in notes %}
                                <div class="note-item">
                                    <div class="note-header">
                                        <span class="note-author">Posted by: {{ note.user }}</span>
                                        <span class="note-timestamp">{{ note.date|date:"Y-m-d H:i:s" }}</span>
                                    </div>
                                    <p class="note-content">{{ note.notes }}</p>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <p class="empty-message">No notes available for this member.</p>
                            {% endif %}
                        </div>
                    </div>
                </section>
                
<section id="pdf-documents" class="tab-pane">
    <div class="content-section">
        <div class="pdf-upload-section">
            <h2>Upload New Document (PDF)</h2>
            <form method="post" enctype="multipart/form-data" 
                action="{% url 'member_information' member_group_code=contact_info.member_group_code %}"
                class="pdf-upload-form">
                {% csrf_token %}
                <input type="hidden" name="upload_document" value="1"> 
                
                {# Custom Dropdown for Document Title (Fica Options) #}
                <div class="form-row">
                    <label for="{{ pdf_upload_form.title.id_for_label }}">Document Title: </label>
                    <select name="{{ pdf_upload_form.title.name }}" 
                            id="{{ pdf_upload_form.title.id_for_label }}"
                            required>
                        <option value="" disabled selected>Select Fica Document Type</option>
                        <option value="Fica_1">Fica_1</option>
                        <option value="Fica_2">Fica_2</option>
                        <option value="Fica_3">Fica_3</option>
                        <option value="Fica_4">Fica_4</option>
                        <option value="Fica_5">Fica_5</option>
                        <option value="Fica_6">Fica_6</option>
                        <option value="Fica_7">Fica_7</option>
                    </select>
                </div>

                {# Manual Render for Select PDF File (document_file) #}
                <div class="form-row">
                    <label for="{{ pdf_upload_form.document_file.id_for_label }}">Select PDF File: </label>
                    {{ pdf_upload_form.document_file }}
                </div>
                
                {# Display any non-field errors (e.g., if the file is too large) #}
                {% for error in pdf_upload_form.non_field_errors %}
                    <p class="form-error">{{ error }}</p>
                {% endfor %}
                
                <button type="submit" class="pdf-upload-button">Upload Document</button>
            </form>
        </div>
        
        <div class="document-list-section">
            <h2>Existing Documents</h2>
            {% if documents %}
                <table>
                    <thead>
                        <tr>
                            <th>File Name</th>
                            <th>title</th>
                            <th>Uploaded By</th>
                            <th>Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for doc in documents %}
                        <tr>
                            <td>{{ doc.document_file.name|default:"N/A"|slice:"50" }}</td>
                            <td>{{ doc.title }}</td>
                            <td>{{ doc.uploaded_by }}</td>
                            <td>{{ doc.uploaded_at|date:"Y-m-d H:i" }}</td>
                            <td>
                                <a href="{% url 'member_information' member_group_code=contact_info.member_group_code %}?download_id={{ doc.id }}">
                                    Download
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="empty-message">No documents have been uploaded for this member yet.</p>
            {% endif %}
        </div>
    </div>
</section>
            </div>
        </div>
    </div>
    
<script>
    // Function to handle switching between display and edit modes
    const toggleEditView = (currentSectionId, targetSectionId) => {
        const currentDiv = document.getElementById(currentSectionId);
        const targetDiv = document.getElementById(targetSectionId);

        if (currentDiv) currentDiv.style.display = 'none';
        if (targetDiv) targetDiv.style.display = 'block';
    };

    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.tab-nav li');
        const panes = document.querySelectorAll('.tab-pane');

        // Function to activate a specific tab/pane
        const activateTab = (tabElement) => {
            const targetId = tabElement.dataset.tabTarget;
            const targetPane = document.querySelector(targetId);

            if (targetPane) {
                // Remove active from all
                tabs.forEach(t => t.classList.remove('active'));
                panes.forEach(p => p.classList.remove('active'));

                // Add active to selected tab and pane
                tabElement.classList.add('active');
                targetPane.classList.add('active');
            }
        };

        // 1. Add click listeners to all tabs
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                activateTab(tab);
                // Update URL hash without refreshing the page
                window.history.pushState(null, null, tab.dataset.tabTarget);
            });
        });
        
        // 2. Add click listeners for the Edit/Cancel buttons
        document.querySelectorAll('.edit-toggle-btn').forEach(button => {
            button.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');      // e.g., general-info-edit
                const parentTabId = this.getAttribute('data-parent-tab'); // e.g., general-info

                // Determine the current visible section based on the target
                let currentId;
                if (targetId.endsWith('-edit')) {
                    // User clicked Edit (current is display)
                    currentId = parentTabId + '-display'; 
                } else {
                    // User clicked Cancel (current is edit)
                    currentId = parentTabId + '-edit'; 
                }
                toggleEditView(currentId, targetId);
            });
        });


        // 3. Handle initial tab selection (Hash/URL) AND Edit Mode Activation
        const urlParams = new URLSearchParams(window.location.search);
        const activateEditMode = urlParams.get('edit_mode');
        const hash = window.location.hash;
        
        let initialTab = null;
        let editDivId = null;

        // --- Check for edit mode parameter ---
        if (activateEditMode === 'general_info') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#general-info"]');
            editDivId = 'general-info-edit';
        } else if (activateEditMode === 'cbc') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cbc"]');
            editDivId = 'cbc-edit';
        } else if (activateEditMode === 'cbc_admin') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cbc-admin"]');
            editDivId = 'cbc-admin-edit';
        } else if (activateEditMode === 'cbc_consultancy') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cbc-consultancy"]');
            editDivId = 'cbc-consultancy-edit';
        } else if (activateEditMode === 'cfa') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cfa"]');
            editDivId = 'cfa-edit';
        } else if (activateEditMode === 'cfa-admin') { // Note: using cfa-admin here matches the section id, adjust if your Python code uses cfa_admin
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cfa-admin"]');
            editDivId = 'cfa-admin-edit';
        } else if (activateEditMode === 'cfa2') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cfa2"]');
            editDivId = 'cfa2-edit';
        } else if (activateEditMode === 'cfa3') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#cfa3"]');
            editDivId = 'cfa3-edit';
        } else if (activateEditMode === 'communications') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#communications"]');
            editDivId = 'communications-edit';
        } else if (activateEditMode === 'hr') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#hr"]');
            editDivId = 'hr-edit';
        } else if (activateEditMode === 'section13a') {
            initialTab = document.querySelector('.tab-nav li[data-tab-target="#section13a"]');
            editDivId = 'section13a-edit';
        } else if (hash) {
            // --- Check for URL hash (e.g., after successful save or direct link) ---
            initialTab = document.querySelector(`.tab-nav li[data-tab-target="${hash}"]`);
        }
        
        if (initialTab) {
            // 1. Activate the determined tab
            activateTab(initialTab);
            
            // 2. If edit mode was explicitly requested via URL param (due to POST failure), switch views
            if (editDivId) {
                const displayDivId = editDivId.replace('-edit', '-display');
                // Switch from display view to edit view
                toggleEditView(displayDivId, editDivId); 
            }
        } else {
            // Fallback: activate the default active tab (should be the first one)
            activateTab(document.querySelector('.tab-nav li.active'));
        }
    });
</script>
</body>
</html>